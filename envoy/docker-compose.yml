version: "3.5"
networks:
  banshee:
    name: banshee
services: 
  envoy:
    networks:
      - banshee
    image: envoyproxy/envoy:v1.7.0
    command: "envoy -c /etc/envoy/envoy-xds.yaml --service-cluster 'front-envoy' --service-node 'front-envoy'"
    volumes:
      - ../envoy-xds.yaml:/etc/envoy/envoy-xds.yaml
    expose:
      - "8443"
      - "9000"
    ports:
      - "8443:8443"
      - "9000:9000"  
  greeter:
    networks:
      - banshee
    image: "gojektech/grpc-greeter"
    hostname: "greeter"
    expose:
      - "8443"
    ports:
      - "8444:8443"